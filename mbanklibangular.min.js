!function(){function e(e,t,r){function n(e){this.url=e}var o="",i=["post","get","delete"],a=(function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})});n.Utils={},n.Utils.uuid=a,n.prototype.setCredentials=function(e,t){o=r.encode(e+":"+t)},n.prototype.$$request=function(r,n,a,s){if(n=n||!1,n?e.defaults.headers.common.Authorization="Basic "+o:delete e.defaults.headers.common.Authorization,i.indexOf(a)<0)throw new TypeError("Incorrect request type",a);var l=this.url||null;if(null==l)throw new TypeError("Undefined baseUrl");return t.debug("$$request",r,s,n,a,arguments),e({method:a,url:this.url+r,data:s})};var s=this.$$requests();for(var l in s)s.hasOwnProperty(l)&&"MBankApiRequest"===s[l].constructor.name&&(n.prototype[l]=function(e){var r=e.url,n=e.auth,o=e.type;if(!e.type)throw new TypeError("Undefined requestInfo.type");return function(e){return t.debug(l,"::",e),this.$$request.apply(this,[r,n,o,e])}}(s[l]));var u=/^(?=[a-f\d]{24}$)(\d+[a-f]|[a-f]+\d)/i;return n.prototype.servicesGet=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid id of the service",e);return this.$$request("services/"+e,!1,"get")},n.prototype.servicesMobile=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid mobile phone number",e);return this.$$request("services/mobile/"+e,!1,"get")},n.prototype.paymentPay=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid paymentId",e);return this.$$request("payments/"+e+"/pay",!0,"get")},n.prototype.paymentInfo=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid paymentId",e);return this.$$request("payments/"+e,!0,"get")},n.prototype.paymentsHistory=function(e,t){if(e=parseInt(e)||null,t=parseInt(t)||null,"number"!=typeof e||0>e)throw new TypeError("Not valid page parameter",e);if("number"!=typeof t||0>t)throw new TypeError("Not valid size parameter",t);return this.$$request("payments?page="+e+"&size="+t,!0,"get")},n.prototype.cards=function(e){var t="cards";return Array.isArray(e)&&(t+="?state="+e.join()),this.$$request(t,!0,"get")},n.prototype.cardInfo=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid cardId",e);return this.$$request("cards/"+e,!0,"get")},n.prototype.cardDelete=function(e){if(e=parseInt(e)||null,!e)throw new TypeError("Not valid cardId",e);return this.$$request("cards/"+e,!0,"delete")},n.prototype.invoiceDublicate=function(e){if(e=e.toString()||null,!u.text(e))throw new TypeError("Not valid invoiceId",e);return this.$$request("invoices/"+e+"/dublicate",!0,"get")},n.prototype.invoiceCancel=function(e){if(e=e.toString()||null,!u.text(e))throw new TypeError("Not valid invoiceId",e);return this.$$request("invoices/"+e+"/cancel",!0,"get")},n.prototype.invoicePay=function(e){if(e=e.toString()||null,!u.text(e))throw new TypeError("Not valid invoiceId",e);return this.$$request("invoices/"+e+"/pay",!0,"psot")},new n(this.get("url"))}angular.module("mbank.lib.angular.config",[]).value("mbank.lib.angular.config",{debug:!0});var t=angular.module("mbank.lib.angular",["mbank.lib.angular.config"]);t.config(["$httpProvider","$mbankApiProvider",function(e,t){e.defaults.headers.post["Content-Type"]="application/json",console.log("$mbankApiProvider",t),t.set("url","http://0.0.0.0:1234/api.mbank.nebo15.me/v1/")}]),t.provider("$mbankApi",function(){function t(e,t,r){if("string"!=typeof e||"boolean"!=typeof t||["post","get","delete"].indexOf(r)<0)throw new TypeError("Not valid input parameters",arguments);this.url=e,this.auth=t,this.type=r}var r={url:"http://api.mbank.nebo15.me/v1/"},n={options:new t("options",!0,"get"),walletCreate:new t("wallet",!1,"post"),walletActivate:new t("wallet/activate",!1,"post"),walletResendCode:new t("wallet/resend_code",!1,"post"),walletSendPasswordResetCode:new t("wallet/send_password_reset_code",!1,"post"),walletResetPassword:new t("wallet/reset_password",!1,"post"),walletGet:new t("wallet",!0,"get"),walletDelete:{},walletPersonSet:new t("wallet/person",!0,"post"),walletPersonGet:new t("wallet/person",!0,"get"),walletPictureUpload:new t("wallet/picture",!0,"post"),walletPictureDelete:new t("wallet/picture",!0,"delete"),walletFind:new t("wallet/find",!0,"post"),walletReplenishmentPoints:new t("wallet/replenishment_points",!0,"get"),walletSettings:new t("wallet/settings",!0,"post"),services:new t("services",!0,"get"),servicesListGroups:new t("services/groups",!0,"get"),servicesOrder:new t("services/order",!0,"post"),payments:new t("payments",!0,"post"),cardsCreate:new t("cards",!0,"post"),limits:new t("limits",!0,"get"),invoiceCreate:new t("invoices",!0,"post"),invoices:new t("invoices",!0,"get"),invoicesCreated:new t("invoices/created",!0,"get")};return{set:function(e,t){r[e]=t},request:function(e,t){if(!e)throw new TypeError("Undefined name of request");return n[e]=t,n},get:function(e){return r[e]},$$requests:function(){return n},$get:e}}),e.$inject=["$http","$log","Base64"],t.factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t){var r,n,o,i,a,s="",l="",u="",p=0;do r=t.charCodeAt(p++),n=t.charCodeAt(p++),l=t.charCodeAt(p++),o=r>>2,i=(3&r)<<4|n>>4,a=(15&n)<<2|l>>6,u=63&l,isNaN(n)?a=u=64:isNaN(l)&&(u=64),s=s+e.charAt(o)+e.charAt(i)+e.charAt(a)+e.charAt(u),r=n=l="",o=i=a=u="";while(p<t.length);return s},decode:function(t){var r,n,o,i,a,s="",l="",u="",p=0,c=/[^A-Za-z0-9\+\/\=]/g;c.exec(t)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=e.indexOf(t.charAt(p++)),i=e.indexOf(t.charAt(p++)),a=e.indexOf(t.charAt(p++)),u=e.indexOf(t.charAt(p++)),r=o<<2|i>>4,n=(15&i)<<4|a>>2,l=(3&a)<<6|u,s+=String.fromCharCode(r),64!=a&&(s+=String.fromCharCode(n)),64!=u&&(s+=String.fromCharCode(l)),r=n=l="",o=i=a=u="";while(p<t.length);return s}}})}();